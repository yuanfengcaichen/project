<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="club.codeqi.bean.user.userMapper">
    <!-- 增【G】 -->
    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
		insert into
		user (username,password,role_id,create_time,is_lock)
		values (#{username},#{password},#{role_id},#{create_time},#{is_lock})
	</insert>

    <!-- 删 -->
    <delete id="delete">
		delete from user where id = #{id}
	</delete>

    <!-- 改【G】 -->
    <update id="update">
		update user set
		username = #{username},
		password = #{password},
		role_id = #{role_id},
		create_time = #{create_time},
		is_lock = #{is_lock},
		where id = #{id}
	</update>


    <!-- ================================== 查询相关 ================================== -->
    <!-- select id, uid, mouth, basic, postion, merit, fare, total_wages, personal_leave, late, social_security, accumulation_fund, other, total_deduct, net_payment from payrolls  -->

    <!-- 通用映射：自动模式 -->
    <resultMap id="model" autoMapping="true" type="club.codeqi.bean.user.user"></resultMap>

	<!-- 通用映射：手动模式 -->
<!--	<resultMap id="user_Map" type="club.codeqi.bean.user.user">-->
<!--		<id property="Sid" column="Sid"></id>-->
<!--		<result property="SName" column="SName"></result>-->
<!--		<result property="Address" column="Address"></result>-->
<!--		<result property="Synopsis" column="Synopsis"></result>-->
<!--		<result property="Opentime" column="Opentime"></result>-->
<!--		<result property="Theme" column="Theme"></result>-->
<!--		<result property="Grade" column="Grade"></result>-->
<!--		<result property="Passed" column="Passed"></result>-->
<!--		<result property="Introduce" column="Introduce"></result>-->
<!--		<result property="Uid" column="Uid"></result>-->
<!--		<collection property="scenicPhotos" ofType="club.codeqi.travel.bean.ScenicPhoto" column="Sid">-->
<!--			<id property="Sphid" column="Sphid"></id>-->
<!--			<result property="SphName" column="SphName"></result>-->
<!--			<result property="Sid" column="Sid"></result>-->
<!--			<result property="Scoid" column="Scoid"></result>-->
<!--		</collection>-->
<!--	</resultMap>-->

    <!-- 公共查询sql片段 -->
    <sql id="select_sql">
		SELECT
			u.*, p.*
		FROM
			USER u
		LEFT JOIN role_permission p ON u.role_id = p.role_id
	</sql>


    <!-- 查 -->
    <select id="selectByid" resultMap="model">
        <include refid="select_sql"></include>
        where id = #{id}
    </select>

    <!-- 查询，根据条件(参数为null或0时默认忽略此条件)【G】 -->
    <select id="selectAll" resultMap="model">
        <include refid="select_sql"></include>
    </select>

	<!-- 查询，根据用户名【G】 -->
	<select id="findByName" resultMap="model">
		<include refid="select_sql"></include>
		<where>
			username = #{name}
		</where>
	</select>

</mapper>
